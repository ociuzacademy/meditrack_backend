{% extends 'doctor/doctor_index.html' %}

{% block content %}
<style>
    .request-container {
        max-width: 650px;
        margin: 40px auto;
        background: white;
        padding: 35px;
        border-radius: 16px;
        box-shadow: 0 6px 25px rgba(0,0,0,0.1);
        animation: fadeIn 0.4s ease-in-out;
    }

    .request-title {
        font-weight: 700;
        color: #023e8a;
        text-align: center;
        margin-bottom: 25px;
    }

    .form-label {
        font-weight: 600;
        color: #023e8a;
    }

    .form-control, select, textarea {
        border-radius: 10px !important;
        padding: 12px;
        border: 1px solid #ced4da;
        transition: 0.3s;
    }

    .form-control:focus, select:focus, textarea:focus {
        border-color: #0077b6 !important;
        box-shadow: 0 0 5px rgba(0, 119, 182, 0.4);
    }

    .btn-submit {
        background-color: #0077b6;
        border: none;
        padding: 12px;
        width: 100%;
        border-radius: 10px;
        font-weight: 600;
        font-size: 1.05rem;
        color: white;
        transition: 0.3s;
    }

    .btn-submit:hover {
        background-color: #005f91;
        color: #fff;
        transform: translateY(-2px);
    }

    .alert-info {
        border-radius: 12px;
        padding: 12px;
        font-weight: 500;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>


<div class="request-container">
    <h2 class="request-title">Request Blood</h2>

    {% if messages %}
        {% for msg in messages %}
            <div class="alert alert-info">{{ msg }}</div>
        {% endfor %}
    {% endif %}

    <form method="POST">
        {% csrf_token %}

        <!-- Blood Group -->
        <div class="mb-3">
            <label class="form-label">Blood Group</label>
            <select name="blood_group" class="form-control" required>
                <option value="">-- Select Blood Group --</option>
                <option value="A+">A+</option><option value="A-">A-</option>
                <option value="B+">B+</option><option value="B-">B-</option>
                <option value="AB+">AB+</option><option value="AB-">AB-</option>
                <option value="O+">O+</option><option value="O-">O-</option>
            </select>
        </div>

        <!-- Units Required -->
        <div class="mb-3">
            <label class="form-label">Units Required</label>
            <input type="number" name="units_required" class="form-control" required min="1">
        </div>

        <!-- User Location -->
        <div class="mb-3">
            <label class="form-label">User Location</label>
            <select name="location" class="form-control" required>
                <option value="">-- Select User Location --</option>
                <option value="Thrissur">Thrissur</option>
                <option value="Ernakulam">Ernakulam</option>
                <option value="Palakkad">Palakkad</option>
            </select>
        </div>

        <!-- Donation Type -->
        <div class="mb-3">
            <label class="form-label">Donation Type</label>
            <select name="donation_type" class="form-control" required>
                <option value="">-- Select Donation Type --</option>
                <option value="Whole Blood">Whole Blood</option>
                <option value="Red Cells">Red Cells</option>
                <option value="Plasma">Plasma</option>
                <option value="Platelets">Platelets</option>
            </select>
        </div>

        <!-- â­ Donation Date (NEW FIELD) -->
        <div class="mb-3">
            <label class="form-label">Preferred Donation Date</label>
            <input type="date" name="donation_date" class="form-control">
        </div>

        <!-- Reason -->
        <div class="mb-3">
            <label class="form-label">Reason</label>
            <textarea name="reason" class="form-control" rows="3" required></textarea>
        </div>

        <button class="btn-submit">Submit Request</button>
    </form>
</div>

<script>
    setTimeout(function() {
        let alerts = document.querySelectorAll('.alert');
        alerts.forEach(function(alert) {
            alert.style.transition = "0.5s";
            alert.style.opacity = "0";
            setTimeout(() => alert.remove(), 500); 
        });
    }, 3000);
</script>

{% endblock %}

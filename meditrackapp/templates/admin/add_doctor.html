{% extends 'admin/admin_index.html' %}
{% block content %}

<div class="container py-5">
  <div class="card shadow-lg border-0 rounded-4 mx-auto" style="max-width: 650px;">
    <div class="card-body">
      <h2 class="text-center fw-bold mb-4" style="color: #300a4f;">Add Doctor</h2>

      <!-- Django Messages -->
      {% if messages %}
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show border-start border-4"
        style="border-color: #300a4f !important;" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
      {% endfor %}
      {% endif %}

      <!-- Add Doctor Form -->
      <form method="POST" enctype="multipart/form-data" class="p-2">
        {% csrf_token %}

        <div class="mb-3">
          <label class="form-label fw-semibold" style="color: #300a4f;">Full Name</label>
          <input type="text" name="name" class="form-control" required placeholder="Enter doctor's full name">
        </div>

        <div class="mb-3">
          <label class="form-label fw-semibold" style="color: #300a4f;">Phone Number</label>
          <input type="text" name="phone_number" class="form-control" required placeholder="Enter phone number">
        </div>

        <div class="mb-3">
          <label class="form-label fw-semibold" style="color: #300a4f;">Email</label>
          <input type="email" name="email" class="form-control" required placeholder="Enter email address">
        </div>

        <div class="mb-3">
          <label class="form-label fw-semibold" style="color: #300a4f;">Password</label>
          <input type="password" name="password" class="form-control" required placeholder="Enter password">
        </div>

        <!-- Department / Specialization -->
        <div class="mb-3">
          <label class="form-label fw-semibold" style="color: #300a4f;">Department / Specialization</label>
          <select name="specialization" class="form-select" required>
            <option value="" selected disabled>Select Department</option>
            {% for dept in departments %}
            <option value="{{ dept.id }}">{{ dept.department }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="text-center mt-4">
          <button type="submit" class="btn px-4 py-2 fw-semibold"
            style="background-color: #300a4f; color: #fff; border: none;">
            Add Doctor
          </button>
          <a href="{% url 'manage_doctor' %}" class="btn px-4 py-2 ms-2 fw-semibold"
            style="background-color: #e0e0e0; color: #333; border: none;">
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  body {
    background: #f5f9fc;
  }

  .card {
    background-color: #ffffff;
    border-radius: 15px;
  }

  .form-control,
  .form-select {
    border-radius: 10px;
    transition: all 0.3s ease-in-out;
  }

  .form-control:focus,
  .form-select:focus {
    border-color: #0077b6 !important;
    box-shadow: 0 0 0 0.2rem rgba(0, 119, 182, 0.25) !important;
  }

  .btn:hover {
    opacity: 0.9;
  }

  /* Smooth fade-out animation for alerts */
  .alert.fade-out {
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }
</style>

<!-- Auto-hide Django messages after 5 seconds -->
<script>
  setTimeout(() => {
    document.querySelectorAll('.alert').forEach(alert => {
      alert.classList.add('fade-out');
      setTimeout(() => alert.remove(), 500); // Remove after fade-out
    });
  }, 2000); // 2 seconds
</script>
{% endblock %}

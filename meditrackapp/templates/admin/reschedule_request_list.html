{% extends 'admin/admin_index.html' %}

{% block content %}

<style>

    /* Page Title */
    .page-title {
        font-size: 1.9rem;
        font-weight: 800;
        text-align: center;
        color: #300a4f;
        margin: 35px 0;
    }

    /* Cards Container */
    .req-container {
        display: flex;
        flex-direction: column;
        gap: 18px;
        margin-top: 20px;
    }

    /* Each Row as Card */
    .req-card {
        background: #ffffff;
        border-radius: 18px;
        padding: 20px 25px;
        border: 1px solid #e7ddf5;
        box-shadow: 0 3px 12px rgba(48,10,79,0.12);
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: 0.25s ease;
    }

    .req-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 20px rgba(48,10,79,0.20);
    }

    /* Left Info */
    .req-info {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .req-title {
        font-weight: 700;
        font-size: 1.1rem;
        color: #300a4f;
    }

    .req-sub {
        font-size: 0.9rem;
        color: #4f3c63;
    }

    /* Status Chip */
    .status-chip {
        padding: 6px 15px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: capitalize;
    }

    .pending-chip {
        background: #fff3cd;
        color: #9a7d07;
    }

    .approved-chip {
        background: #d4edda;
        color: #155724;
    }

    .rejected-chip {
        background: #f8d7da;
        color: #721c24;
    }

    /* Review Btn */
    .review-btn {
        background: #300a4f;
        color: white;
        padding: 8px 18px;
        border-radius: 10px;
        font-size: 0.9rem;
        font-weight: 600;
        text-decoration: none;
        transition: 0.25s ease;
    }

    .review-btn:hover {
        background: #210236;
    }

</style>


<div class="container mt-4">

    <h2 class="page-title">Doctor Reschedule Requests</h2>

    <div class="req-container">

        {% for r in requests %}
        <div class="req-card">

            <div class="req-info">
                <div class="req-title">Request #{{ r.id }} â€” {{ r.doctor.name }}</div>
                <div class="req-sub">
                    <strong>Tokens:</strong> {{ r.token_start }} - {{ r.token_end }}
                </div>
                <div class="req-sub">
                    <strong>Reason:</strong> {{ r.reason }}
                </div>
            </div>

            <div class="d-flex flex-column align-items-end">

                <!-- Status Chip -->
                {% if r.status == "pending" %}
                    <span class="status-chip pending-chip">Pending</span>
                {% elif r.status == "approved" %}
                    <span class="status-chip approved-chip">Approved</span>
                {% else %}
                    <span class="status-chip rejected-chip">Rejected</span>
                {% endif %}

                <!-- Review Button -->
                <a href="{% url 'admin_review_reschedule' r.id %}" class="review-btn mt-2">
                    Review
                </a>

            </div>

        </div>
        {% empty %}
        <p class="text-center text-muted mt-3">No reschedule requests available.</p>
        {% endfor %}

    </div>

</div>

{% endblock %}
